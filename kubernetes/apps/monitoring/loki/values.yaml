existingSecretForConfig: loki-config-secret
gateway:
  enabled: true
  replicas: 1
  affinity: |
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 1
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.gatewaySelectorLabels" . | nindent 12 }}
            topologyKey: kubernetes.io/hostname
  ingress:
    enabled: true
    ingressClassName: "nginx"
    annotations:
      nginx.ingress.kubernetes.io/auth-method: GET
      nginx.ingress.kubernetes.io/auth-url: http://authelia.default.svc.cluster.local/api/verify
      nginx.ingress.kubernetes.io/auth-signin: https://auth.porkboi.io?rm=$request_method
      nginx.ingress.kubernetes.io/auth-response-headers: Remote-User,Remote-Name,Remote-Groups,Remote-Email
      nginx.ingress.kubernetes.io/auth-snippet: |
        proxy_set_header X-Forwarded-Method $request_method;
      external-dns.alpha.kubernetes.io/target: porkboi.io
      hajimari.io/enable: "false"
    hosts:
      - host: &host "loki.porkboi.io"
        paths:
          - path: /
            pathType: Prefix
    tls:
      - hosts:
          - *host
backend:
  replicas: 1
write:
  replicas: 1
  affinity: |
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 1
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.writeSelectorLabels" . | nindent 12 }}
            topologyKey: kubernetes.io/hostname
  persistence:
    size: 10Gi
    storageClass: longhorn
read:
  replicas: 1
  affinity: |
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 1
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.readSelectorLabels" . | nindent 12 }}
            topologyKey: kubernetes.io/hostname
  extraVolumeMounts:
    - name: loki-rules
      mountPath: /rules/fake
    - name: loki-rules-tmp
      mountPath: /tmp/scratch
    - name: loki-tmp
      mountPath: /tmp/loki-tmp
  extraVolumes:
    - name: loki-rules
      emptyDir: {}
    - name: loki-rules-tmp
      emptyDir: {}
    - name: loki-tmp
      emptyDir: {}
  persistence:
    size: 10Gi
    storageClass: longhorn
monitoring:
  serviceMonitor:
    enabled: false
    metricsInstance:
      enabled: false
  selfMonitoring:
    enabled: false
    grafanaAgent:
      installOperator: false
    lokiCanary:
      enabled: false
test:
  enabled: false