---
securityContext: # required for Talos
  privileged: true
  capabilities:
    ciliumAgent: "{CHOWN,KILL,NET_ADMIN,NET_RAW,IPC_LOCK,SYS_ADMIN,SYS_RESOURCE,DAC_OVERRIDE,FOWNER,SETGID,SETUID}"
    cleanCiliumState: "{NET_ADMIN,SYS_ADMIN,SYS_RESOURCE}"
cgroup:
  autoMount:
    enabled: false
  hostRoot: "/sys/fs/cgroup"

tunnel: disabled
autoDirectNodeRoutes: true
ipv4NativeRoutingCIDR: "10.42.0.0/16"
localRedirectPolicy: true
ipam:
  mode: kubernetes
  # mode: cluster-pool-v2beta
  # operator:
  #   clusterPoolIPv4PodCIDRList:
  #     - "${IP_POD_CIDR_V4}"
  #   clusterPoolIPv4MaskSize: 24
kubeProxyReplacement: strict
k8sServiceHost: 10.1.0.10
k8sServicePort: 6443
kubeProxyReplacementHealthzBindAddr: 0.0.0.0:10256
rollOutCiliumPods: true
operator:
  rollOutPods: true
bgpControlPlane:
      enabled: true
loadBalancer:
  algorithm: maglev
  # mode: snat
  mode: dsr
nodePort:
    enabled: true
    range: 9993,32767
bandwidthManager:
  enabled: true
l7Proxy: true
hubble:
  enabled: true
  peerService:
    clusterDomain: cluster.local
  relay:
    enabled: true
  ui:
    enabled: true
    rollOutPods: true
    ingress:
      enabled: true
      className: "nginx"
      hosts:
        - "hubble.porkboi.io"
      tls:
        - hosts:
            - "hubble.porkboi.io"
  tls:
    enabled: true
    auto:
      enabled: true
      method: "helm"
      certValidityDuration: 3650